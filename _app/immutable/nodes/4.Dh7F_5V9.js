import{H as Me}from"../chunks/BUApaBEI.js";import{s as $e,g as Pe}from"../chunks/CRVbaBE_.js";import{b as Dt,d as Ne,a as P,f as F,c as Fe}from"../chunks/CXw8tMbP.js";import{t as A,h as G,v as Wt,b1 as je,a as Kt,W as He,ac as Ee,a_ as ke,aX as Ie,y as Oe,a0 as ut,Q as ze,aq as ht,ar as mt,j as M,i as S,A as Le,as as Y,aw as C,D as Re,u as Ce,F as x,au as qe,k as t,b2 as Be,$ as Ve,b0 as m,aO as De}from"../chunks/BU4Rvi8u.js";import{i as K,_ as We}from"../chunks/D7KWC1rY.js";import{o as Ke}from"../chunks/CRRAUqjJ.js";import{s as Ft}from"../chunks/DFHL0JgO.js";import{h as Je,a as T,e as At}from"../chunks/DCKIY628.js";import{p as B,b as Jt}from"../chunks/C81_f7je.js";import{b as dt}from"../chunks/NfgjWl4U.js";import{r as Qe}from"../chunks/CrnG9bKD.js";function jt(s,a,i=!1,u=!1,d=!1){var g=s,b="";A(()=>{var _=ze;if(b===(b=a()??"")){G&&Wt();return}if(_.nodes!==null&&(je(_.nodes.start,_.nodes.end),_.nodes=null),b!==""){if(G){Kt.data;for(var v=Wt(),h=v;v!==null&&(v.nodeType!==He||v.data!=="");)h=v,v=Ee(v);if(v===null)throw ke(),Ie;Dt(Kt,h),g=Oe(v);return}var f=b+"";i?f=`<svg>${f}</svg>`:u&&(f=`<math>${f}</math>`);var w=Ne(f);if((i||u)&&(w=ut(w)),Dt(ut(w),w.lastChild),i||u)for(;ut(w);)g.before(ut(w));else g.before(w)}})}function Ue(s,a,i){var u=s==null?"":""+s;return u=u?u+" "+a:a,u===""?null:u}function Xe(s,a){return s==null?null:String(s)}function Ye(s,a,i,u,d,g){var b=s.__className;if(G||b!==i||b===void 0){var _=Ue(i,u);(!G||_!==s.getAttribute("class"))&&(_==null?s.removeAttribute("class"):s.className=_),s.__className=i}return g}function $t(s,a,i,u){var d=s.__style;if(G||d!==a){var g=Xe(a);(!G||g!==s.getAttribute("style"))&&(g==null?s.removeAttribute("style"):s.style.cssText=g),s.__style=a}return u}function Ge(s,a){throw new Me(s,a)}const Ze=!0,tr=()=>$e.map(s=>({slug:s.slug})),er=({params:s})=>{const a=Pe(s.slug);if(!a)throw Ge(404,`Story "${s.slug}" not found.`);return{story:a}},Rr=Object.freeze(Object.defineProperty({__proto__:null,entries:tr,load:er,prerender:Ze},Symbol.toStringTag,{value:"Module"})),Pt=s=>typeof s=="string"?s.trim():"",Qt=s=>s.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#39;"),rr=s=>Pt(Pt(s).replace(/\r\n?/g,`
`)),nr=s=>{const a=Pt(s);return/^(https?:|mailto:|tel:)/i.test(a)?a.replaceAll('"',"%22"):""},it=s=>{const a=[],i=s.replace(/`([^`]+)`/g,(d,g)=>{const b=`@@CODE_${a.length}@@`;return a.push(`<code>${Qt(g)}</code>`),b});let u=Qt(i);return u=u.replace(/\[([^\]]+)\]\(([^)\s]+)\)/g,(d,g,b)=>{const _=nr(b);return _?`<a href="${_}" target="_blank" rel="noopener noreferrer">${g}</a>`:g}),u=u.replace(/\*\*([^*\n]+)\*\*/g,"<strong>$1</strong>"),u=u.replace(/\*([^*\n]+)\*/g,"<em>$1</em>"),u=u.replace(/~~([^~\n]+)~~/g,"<s>$1</s>"),a.forEach((d,g)=>{u=u.replaceAll(`@@CODE_${g}@@`,d)}),u},Ut=s=>s.trim().length===0,Xt=s=>/^\s*(-{3,}|\*{3,}|_{3,})\s*$/.test(s),sr=s=>/^\s{0,3}#{1,4}\s+/.test(s),St=s=>/^\s{0,3}[-*+]\s+/.test(s),Tt=s=>/^\s{0,3}\d+\.\s+/.test(s),Mt=s=>/^\s{0,3}>\s?/.test(s),ir=s=>{const a=rr(s);if(a.length===0)return"";const i=a.split(`
`),u=[];let d=0;for(;d<i.length;){const g=i[d];if(Ut(g)){d+=1;continue}if(Xt(g)){u.push("<hr>"),d+=1;continue}const b=g.match(/^\s{0,3}(#{1,4})\s+(.+)$/);if(b){const h=b[1].length;u.push(`<h${h}>${it(b[2].trim())}</h${h}>`),d+=1;continue}if(St(g)){const h=[];for(;d<i.length&&St(i[d]);){const f=i[d].replace(/^\s{0,3}[-*+]\s+/,"");h.push(`<li>${it(f.trim())}</li>`),d+=1}u.push(`<ul>${h.join("")}</ul>`);continue}if(Tt(g)){const h=[];for(;d<i.length&&Tt(i[d]);){const f=i[d].replace(/^\s{0,3}\d+\.\s+/,"");h.push(`<li>${it(f.trim())}</li>`),d+=1}u.push(`<ol>${h.join("")}</ol>`);continue}if(Mt(g)){const h=[];for(;d<i.length&&Mt(i[d]);)h.push(i[d].replace(/^\s{0,3}>\s?/,"")),d+=1;const f=h.map(w=>it(w)).join("<br>");u.push(`<blockquote><p>${f}</p></blockquote>`);continue}const _=[];for(;d<i.length&&!Ut(i[d]);){const h=i[d];if(_.length>0&&(Xt(h)||sr(h)||St(h)||Tt(h)||Mt(h)))break;_.push(h),d+=1}const v=_.map(h=>it(h.trim())).join("<br>");u.push(`<p>${v}</p>`)}return u.join(`
`)},Nt=s=>ir(s);var or=F('<section class="relative z-20 px-1 pb-10 pt-2"><div class="max-w-4xl"><div class="story-richtext text-sm text-[var(--story-text)]"><!></div></div></section>');function ar(s,a){mt(a,!0);let i=B(a,"credits",3,null);var u=or(),d=M(u),g=M(d),b=M(g);jt(b,()=>{var _;return Nt(((_=i())==null?void 0:_.label)??"")}),S(g),S(d),S(u),P(s,u),ht()}var cr=F('<div class="mt-4 story-richtext max-w-3xl text-base leading-relaxed"><!></div>'),lr=F('<section class="relative z-20 px-2 pt-1 mb-10"><div class="max-w-xl"><h2 class="text-3xl leading-tight tracking-tight"> </h2> <!></div></section>');function ur(s,a){let i=B(a,"title",3,""),u=B(a,"introVisible",3,!1),d=B(a,"introHtml",3,"");var g=Fe(),b=Le(g);{var _=v=>{var h=lr(),f=M(h),w=M(f),j=M(w,!0);S(w);var Z=Y(w,2);{var tt=$=>{var N=cr(),V=M(N);jt(V,d),S(N),P($,N)};K(Z,$=>{u()&&$(tt)})}S(f),S(h),A(()=>Ft(j,i())),P(v,h)};K(b,v=>{i()&&v(_)})}P(s,g)}var dr=F('<h3 class="text-2xl font-normal leading-tight tracking-tight text-[var(--story-context-text)]"> </h3>'),gr=F('<div class="story-richtext scene-context-copy text-base leading-tight text-[var(--story-context-muted)] svelte-1kzmjux"><!></div>'),hr=F('<article><div class="bg-[var(--story-context-bg)] text-[var(--story-context-text)] p-2"><!> <!></div></article>'),mr=F('<section class="flex items-center py-2 p-4"><!></section>');function fr(s,a){mt(a,!0);let i=B(a,"moment",3,null),u=B(a,"active",3,!1),d=B(a,"heightVh",3,92);var g=mr(),b=M(g);{var _=v=>{var h=hr(),f=M(h),w=M(f);{var j=$=>{var N=dr(),V=M(N,!0);S(N),A(()=>Ft(V,i().title)),P($,N)};K(w,$=>{i().title&&$(j)})}var Z=Y(w,2);{var tt=$=>{var N=gr(),V=M(N);jt(V,()=>i().html),S(N),P($,N)};K(Z,$=>{i().html&&$(tt)})}S(f),S(h),A(()=>Ye(h,1,`w-fit max-w-xl transition-opacity duration-300 ${u()?"opacity-100":"opacity-82"}`,"svelte-1kzmjux")),P(v,h)};K(b,v=>{var h;(h=i())!=null&&h.hasContent&&v(_)})}S(g),A(()=>$t(g,`min-height:${d()}dvh`)),P(s,g),ht()}const pr={},vr=/^(https?:|data:|blob:|\/\/|file:)/i,yr=s=>typeof s=="string"?s.trim():"",gt=(s,a="")=>{const i=yr(s);if(i.length===0||vr.test(i)||a&&(i===a||i.startsWith(`${a}/`)))return i;if(i.startsWith("/"))return`${a}${i}`;const u=i.replace(/^\.\//,"");return`${a}/${u}`},Yt=(s,a="")=>Array.isArray(s)?s.map(i=>({...i,src:gt(i.src,a),previewSrc:gt(i.previewSrc,a)})):[],xr=s=>!!(s&&typeof s=="object"&&Array.isArray(s.projections)),_r=async(s,a=fetch)=>{const i=typeof s=="string"?s.trim():"";if(i.length===0)return null;const u=await a(i,{cache:"no-store"});if(!u.ok)throw new Error(`Failed to load ${i}: ${u.status}`);const d=await u.json();if(!xr(d))throw new Error(`Invalid story JSON at ${i}`);return d};var br=F('<div class="mono absolute inset-0 z-20 grid place-items-center text-xs uppercase tracking-[0.2em] text-[var(--story-muted-text)]"> </div>'),wr=F("<vantage-keyframe></vantage-keyframe>",2),Ar=F("<vantage-projection></vantage-projection>",2),Sr=F("<div></div>"),Tr=F('<section class="min-h-[100dvh]"></section>'),Mr=F('<main class="relative bg-[var(--story-page-bg)] text-[var(--story-text)]"><div><!></div> <section class="relative"><div class="sticky top-0 h-[100dvh] overflow-hidden bg-[var(--story-scene-bg)]"><!> <vantage-renderer></vantage-renderer></div> <div class="relative z-20 -mt-[100dvh]"><!> <section class="h-[20dvh]"></section></div></section> <!></main>',2);function $r(s,a){mt(a,!0);let i=B(a,"storyPath",3,""),u=C(Re(pr)),d=m(()=>Qe(t(u))),g=m(()=>t(d).ui),b=m(()=>t(d).sceneSrc),_=m(()=>Array.isArray(t(d).projections)?t(d).projections:[]),v=m(()=>t(d).cameraPathProjection),h=m(()=>{var e;return((e=t(v))==null?void 0:e.id)??""}),f=m(()=>t(d).cameraPathRange??{start:0,end:1,duration:1}),w=m(()=>t(d).cameraControl??{mode:"scrub",durationMs:900,easing:"easeInOutCubic"}),j=m(()=>t(w).mode==="triggered"?"triggered":"scrub"),Z=m(()=>Math.max(120,Number(t(w).durationMs)||900)),tt=m(()=>typeof t(w).easing=="string"&&t(w).easing.trim().length>0?t(w).easing:"linear"),$=m(()=>Array.isArray(t(d).narrativeMoments)?t(d).narrativeMoments:[]),N=m(()=>gt(i(),dt)),V=m(()=>gt(t(b),dt)),Gt=m(()=>Yt(t(_),dt)),Zt=m(()=>t(v)?t(_).some(r=>r.id===t(v).id)?[]:Yt([t(v)],dt):[]),ft=m(()=>[...t(Gt),...t(Zt)]),te=m(()=>{var r;if(t(h).length>0)return t(h);const e=t(ft).find(n=>n.projectionType==="perspective");return(e==null?void 0:e.id)??((r=t(ft)[0])==null?void 0:r.id)??""}),pt=C(!1),I=C(0),vt=C(0),J=C(0),et=C(0),rt=C(0),nt=C(!1),Q=0,H,ot=C(null),U=0;const D=e=>typeof e=="string"?e.trim():"",W=e=>e==null?void 0:String(e),O=(e,r,n)=>Math.min(n,Math.max(r,e)),Ht=(e,r=0)=>{const n=Number(e);return Number.isFinite(n)&&n>0?n:r},ee=e=>e,re=e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,ne=e=>1-Math.pow(1-e,3),se=e=>{const r=D(e).toLowerCase();return r==="linear"?ee:r==="easeoutcubic"||r==="out"?ne:re};let E=m(()=>t(g).theme??{});const Et=e=>{const r=new Set;return e.filter(n=>Number.isFinite(n)).sort((n,o)=>n-o).filter(n=>{const o=n.toFixed(6);return r.has(o)?!1:(r.add(o),!0)})};let ie=m(()=>{var r;const e=Array.isArray((r=t(v))==null?void 0:r.keyframes)?t(v).keyframes.map(n=>Number(n==null?void 0:n.time)).filter(n=>Number.isFinite(n)):[];return Et(e)}),kt=m(()=>{const e=Array.isArray(t($))?t($).map(r=>{var c,l;const n=D((c=r==null?void 0:r.context)==null?void 0:c.title),o=D((l=r==null?void 0:r.context)==null?void 0:l.markdown);return n.length>0||o.length>0?Number(r==null?void 0:r.time):Number.NaN}).filter(r=>Number.isFinite(r)):[];return Et(e)}),z=m(()=>{if(t(j)==="triggered"&&t(kt).length>=2)return t(kt);const e=t(ie);return e.length>0?e:[t(f).start,t(f).end]}),oe=m(()=>{const e=Array.isArray(t(z))?t(z).map(r=>Number(r).toFixed(6)).join(","):"";return[t(j),t(h),Number(t(f).start).toFixed(6),Number(t(f).end).toFixed(6),e].join("|")}),yt=C(""),It=m(()=>{var c;const e=Array.isArray((c=t(v))==null?void 0:c.keyframes)?[...t(v).keyframes].map(l=>({time:Number(l==null?void 0:l.time),scrollWeight:Ht(l==null?void 0:l.scrollWeight,1),pause:Ht(l==null?void 0:l.pause,0)})).filter(l=>Number.isFinite(l.time)).sort((l,p)=>l.time-p.time):[];if(e.length===0)return[{progress:0,time:t(f).start},{progress:1,time:t(f).end}];if(e.length===1)return[{progress:0,time:e[0].time},{progress:1,time:e[0].time}];const r=[{weight:0,time:e[0].time}];let n=0;for(let l=0;l<e.length;l+=1){const p=e[l];p.pause>0&&(n+=p.pause,r.push({weight:n,time:p.time}));const y=e[l+1];y&&(n+=p.scrollWeight,r.push({weight:n,time:y.time}))}if(n<=1e-6)return[{progress:0,time:e[0].time},{progress:1,time:e[e.length-1].time}];const o=r.map(l=>({progress:l.weight/n,time:l.time}));return o[0].progress=0,o[o.length-1].progress=1,o});const ae=e=>{const r=t(It);if(!Array.isArray(r)||r.length===0)return t(f).start+O(e,0,1)*t(f).duration;const n=O(e,0,1);if(n<=r[0].progress)return r[0].time;if(n>=r[r.length-1].progress)return r[r.length-1].time;for(let o=0;o<r.length-1;o+=1){const c=r[o],l=r[o+1];if(n>=c.progress&&n<=l.progress){const p=Math.max(1e-6,l.progress-c.progress),y=(n-c.progress)/p;return c.time+y*(l.time-c.time)}}return r[r.length-1].time},xt=e=>{const r=t(It),n=Number(e);if(!Number.isFinite(n))return 0;if(!Array.isArray(r)||r.length===0)return O((n-t(f).start)/t(f).duration,0,1);if(n<=r[0].time)return r[0].progress;if(n>=r[r.length-1].time)return r[r.length-1].progress;for(let o=0;o<r.length-1;o+=1){const c=r[o],l=r[o+1],p=Math.min(c.time,l.time),y=Math.max(c.time,l.time);if(n<p||n>y)continue;if(Math.abs(l.time-c.time)<=1e-6)return c.progress;const k=(n-c.time)/(l.time-c.time);return O(c.progress+k*(l.progress-c.progress),0,1)}return r[r.length-1].progress};let ce=m(()=>t(z).map(e=>xt(e))),le=m(()=>{const e=t(ce);if(!Array.isArray(e)||e.length<=1)return[];const r=[];for(let n=0;n<e.length-1;n+=1)r.push((e[n]+e[n+1])*.5);return r});const Ot=()=>{Q&&(cancelAnimationFrame(Q),Q=0)},_t=()=>{Ot(),x(nt,!1)},ue=(e,r)=>{if(!Number.isFinite(e))return;const n=Number(t(I));if(!Number.isFinite(n)||Math.abs(e-n)<=1e-6){x(I,e,!0),r==null||r();return}Ot();const o=Math.max(1,t(z).length-1),c=Math.max(1e-6,t(f).duration/o),l=O(Math.abs(e-n)/c,.75,2.5),p=Math.max(1,t(Z)*l),y=se(t(tt)),k=performance.now(),q=()=>{const X=performance.now()-k,lt=O(X/p,0,1),Te=y(lt);if(x(I,n+(e-n)*Te),lt>=1){x(I,e,!0),Q=0,r==null||r();return}Q=requestAnimationFrame(q)};Q=requestAnimationFrame(q)},de=e=>{const r=t(le),n=t(z);if(!Array.isArray(n)||n.length<=1||!Array.isArray(r))return 0;const o=O(e,0,1);for(let c=0;c<r.length;c+=1)if(o<r[c])return c;return n.length-1},zt=e=>{const r=t(z);if(!Array.isArray(r)||r.length===0)return;const n=O(Math.round(e),0,r.length-1);if(x(et,n,!0),n===t(J)&&!t(nt)||t(nt)&&n===t(rt))return;x(rt,n,!0);const o=Number(r[n]);Number.isFinite(o)&&(x(nt,!0),ue(o,()=>{x(J,n,!0),x(rt,n,!0),x(nt,!1),t(et)!==t(J)&&zt(t(et))}))},Lt=e=>{const r=O(e,0,1);if(x(vt,r,!0),t(j)==="triggered"){const n=t(z);if(!Array.isArray(n)||n.length===0)return;const o=de(r);zt(o);return}x(I,ae(r),!0)};let ge=m(()=>t(j)==="triggered"?xt(t(I)):t(vt)),Rt=m(()=>{var r,n,o,c;const e=D((n=(r=t(g))==null?void 0:r.context)==null?void 0:n.introText);return e.length>0?e:D((c=(o=t(g))==null?void 0:o.header)==null?void 0:c.description)}),he=m(()=>Nt(t(Rt))),me=m(()=>t(Rt).length>0),fe=m(()=>t($).map((e,r)=>{var p,y;const n=D((p=e==null?void 0:e.context)==null?void 0:p.title),o=D((y=e==null?void 0:e.context)==null?void 0:y.markdown),c=o.length>0?Nt(o):"",l=n.length>0||c.length>0;return{id:(e==null?void 0:e.id)??`moment-${r+1}`,time:Number(e==null?void 0:e.time)||0,progress:xt(Number(e==null?void 0:e.time)),title:n,html:c,hasContent:l}})),L=m(()=>[...t(fe)].sort((e,r)=>{const n=e.progress-r.progress;return Math.abs(n)>1e-6?n:e.time-r.time})),Ct=m(()=>{if(t(L).length===0)return[];if(t(L).length===1)return[{moment:t(L)[0],heightVh:120}];const e=560,r=t(L).map(o=>O(o.progress,0,1)),n=[0];for(let o=1;o<r.length;o+=1)n.push((r[o-1]+r[o])/2);return n.push(1),t(L).map((o,c)=>{const l=Math.max(.03,n[c+1]-n[c]);return{moment:o,heightVh:Math.max(44,l*e)}})}),pe=m(()=>{if(t(L).length===0)return"";let e=t(L)[0];for(const r of t(L))if(r.progress<=t(ge)+1e-6)e=r;else break;return e.id});const ve=async()=>{const e=await _r(t(N));e&&x(u,e,!0)},ye=e=>{if(!t(ot)||t(L).length===0)return null;const n=Array.from(t(ot).children).filter(y=>y instanceof HTMLElement).map((y,k)=>{const q=t(L)[k];if(!q)return null;const X=y.getBoundingClientRect();return{center:window.scrollY+X.top+X.height*.5,progress:q.progress}}).filter(Boolean),o=(H==null?void 0:H.offsetTop)??0,c=o+window.innerHeight*.5,l=o+((H==null?void 0:H.offsetHeight)??window.innerHeight)-window.innerHeight*.5,p=[{center:c,progress:0},...n,{center:Math.max(c+1,l),progress:1}];if(p.length<=1)return null;for(let y=1;y<p.length;y+=1)p[y].center<=p[y-1].center&&(p[y].center=p[y-1].center+1);if(e<=p[0].center)return p[0].progress;if(e>=p[p.length-1].center)return p[p.length-1].progress;for(let y=0;y<p.length-1;y+=1){const k=p[y],q=p[y+1];if(e>=k.center&&e<=q.center){const X=Math.max(1e-6,q.center-k.center),lt=(e-k.center)/X;return k.progress+lt*(q.progress-k.progress)}}return p[0].progress},qt=()=>{if(typeof window>"u")return;const e=window.scrollY+window.innerHeight*.5,r=ye(e);if(r!=null){Lt(r);return}if(!H)return;const n=H.offsetTop,o=Math.max(1,H.offsetHeight-window.innerHeight),c=(window.scrollY-n)/o;Lt(c)},st=()=>{U||typeof window>"u"||(U=requestAnimationFrame(()=>{U=0,qt()}))};Ke(async()=>{try{await ve()}catch(e){console.warn("[story] Falling back to bundled story data.",e)}return await We(()=>import("../chunks/DO48-3v9.js"),[],import.meta.url),x(pt,!0),await qe(),qt(),window.addEventListener("scroll",st,{passive:!0}),window.addEventListener("resize",st,{passive:!0}),()=>{_t(),U&&(cancelAnimationFrame(U),U=0),window.removeEventListener("scroll",st),window.removeEventListener("resize",st)}}),Ce(()=>{const e=t(oe);if(t(f),t(z),t(j),!t(pt)){_t(),x(J,0),x(et,0),x(rt,0),x(I,t(j)==="triggered"?Number(t(z)[0]??t(f).start):t(f).start,!0),x(vt,0),x(yt,"");return}t(yt)!==e&&(x(yt,e,!0),_t(),x(J,0),x(et,0),x(rt,0),t(j)==="triggered"?x(I,Number(t(z)[t(J)]??t(f).start),!0):x(I,t(f).start,!0),st())});var at=Mr();Je("18hak38",e=>{Be(()=>{Ve.title=t(g).pageTitle??""})});var bt=M(at),xe=M(bt);ur(xe,{get title(){return t(g).header.title},get introVisible(){return t(me)},get introHtml(){return t(he)}}),S(bt);var ct=Y(bt,2),wt=M(ct),Bt=M(wt);{var _e=e=>{var r=br(),n=M(r,!0);S(r),A(()=>Ft(n,t(g).renderer.loading)),P(e,r)};K(Bt,e=>{t(pt)||e(_e)})}var R=Y(Bt,2);A(()=>T(R,"scene",t(V))),T(R,"controls","false"),T(R,"first-person","false"),T(R,"follow-focus","true"),T(R,"show-camera-frame","false"),A(()=>T(R,"background-color",t(E).sceneBg)),$t(R,"display:block;height:100%;width:100%;pointer-events:none;touch-action:none"),A(()=>T(R,"time",t(I).toFixed(4))),At(R,21,()=>t(ft),e=>e.id,(e,r)=>{var n=Ar();A(()=>T(n,"id",t(r).id)),A(()=>T(n,"src",t(r).src)),A(()=>T(n,"projection-type",t(r).projectionType)),A(()=>T(n,"time",W(t(r).time))),A(()=>T(n,"focus",t(r).id===t(te)?"true":"false")),At(n,23,()=>t(r).keyframes,(o,c)=>`${t(r).id}-${c}`,(o,c)=>{var l=wr();A(()=>T(l,"time",W(t(c).time))),A(()=>T(l,"position",W(t(c).position))),A(()=>T(l,"rotation",W(t(c).rotation))),A(()=>T(l,"fov",W(t(c).fov))),A(()=>T(l,"far",W(t(c).far))),A(()=>T(l,"opacity",W(t(c).opacity))),A(()=>T(l,"screen",t(c).screen===!0?"":void 0)),P(o,l)}),S(n),P(e,n)}),S(R),S(wt);var Vt=Y(wt,2),be=M(Vt);{var we=e=>{var r=Sr();At(r,21,()=>t(Ct),n=>n.moment.id,(n,o)=>{{let c=m(()=>t(o).moment.id===t(pe));fr(n,{get moment(){return t(o).moment},get active(){return t(c)},get heightVh(){return t(o).heightVh}})}}),S(r),Jt(r,n=>x(ot,n),()=>t(ot)),P(e,r)},Ae=e=>{var r=Tr();P(e,r)};K(be,e=>{t(Ct).length>0?e(we):e(Ae,!1)})}De(2),S(Vt),S(ct),Jt(ct,e=>H=e,()=>H);var Se=Y(ct,2);ar(Se,{get credits(){return t(g).credits}}),S(at),A(()=>$t(at,`--story-page-bg:${t(E).pageBg};--story-scene-bg:${t(E).sceneBg};--story-panel-fill:${t(E).panelFill};--story-panel-stroke:${t(E).panelStroke};--story-text:${t(E).text};--story-muted-text:${t(E).mutedText};--story-accent:${t(E).accent};--story-context-bg:${t(E).contextBg};--story-context-text:${t(E).contextText};--story-context-muted:${t(E).contextMuted};`)),P(s,at),ht()}function Cr(s,a){mt(a,!0),$r(s,{get storyPath(){return a.data.story.storyPath}}),ht()}export{Cr as component,Rr as universal};
